# Веб-пульт управления квадрокоптером

По адресу 192.168.11.1:7070 открывается web-приложение – пульт управления квадрокоптером.

## Стартовый экран

При отстутствии соединения с ROS, интерфейс будет заблокирован для управления.  
![](/assets/2017-11-27_14-40-53.png)

После установления соединения интерфейс разблокируется.

![](/assets/2017-11-27_14-54-06.png)

В интефейсе доступны:

* Верхняя \(информацинно-командная\) панель
* Контролы
* HUD
* Панель уведомлений

## Верхняя панель

Здесь расположены индикаторы и кнопки действий.

* кнопка-индикатор уведомлений 
  * отображает иконку типа последнего уведомления
  * анимируется при наличии непрочитанных уведомлений
  * открывает панель уведомлений
* индикатор уровня Wi-Fi сигнала \(пока нет возможности знать\)
* индикатор уровня заряда батареи \(пока нет возможности знать\)
* кнопка **DISARM** на случай необходимости отключить винты в полёте
* кнопка-индикатор записи видео при записи светится красным и показывает
  ⚠️ _Нет API для включения/выключения записи_
* кнопка переключения камер. Если на дроне больше одной камеры, позволяет переключиться между ними.
  ⚠️ _Нет API для получения данных о количестве камер на дрное_
* кнопка сохранения текущего кадра на камере
  ⚠️ _Нет API_

Так же пространство верхрей панели используется для отображения важных уведомлений![](/assets/ezgif-1-42c59e3d83.gif)

## Контролы

На момент написания заметки был реализован только один бандл контролов, использующий контролы–стики.

Бандл контролов – обёртка над несоклькими контроллами, решающая общие задачи.

### Основной бандл

На момент написания заметки реализован один бандл.

#### Архитектура

Использует два двухосевых стика

* левый – altitude и yaw
* правый – pitch и roll.

Каждому стику можно задать жесты-экшены, которые будут активироваться при уведении пальца за границу максимального значения в указаной стороне стика. 

Например, в текущем бандле для левого стика реализованы 2 жеста:

* ARM – находится в правом нижнем углу
* DISARM – в левом нижнем углу

#### Действия

* переключение в режим OFFBOARD
  * активируется при касании
  * не активируется, когда
    * дрон уже в режиме OFFBOARD
    * активно

При взаимодействии с контролами переводит дрон в соответствующий режим.















